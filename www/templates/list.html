<ion-view view-title="My Anime">
  <ion-content ng-controller="animeListController">
    <ion-list>
      <ion-item class="item-input item-select">
        <div class="input-label">
          Status
        </div>
        <select
          ng-change="onSelectedLibraryStateChanged()"
          ng-model="selected.libraryState"
          ng-options="option.name for option in libraryStateOptions track by option.id">
        </select>
      </ion-item>

      <ion-item class="item-avatar item-button-right" ng-click="onLibraryEntryClicked(libraryEntry)" ng-repeat="libraryEntry in libraryEntries">
        <img ng-src="{{libraryEntry.anime.cover_image}}">
        <h2>{{libraryEntry.anime.title}}</h2>
        <p>Seen {{libraryEntry.episodes_watched}} of {{libraryEntry.anime.episode_count || &quot;?&quot;}}</p>
        <button class="button button-positive" ng-click="incrementWatched(libraryEntry.anime.id)" ng-if="(libraryEntry.episodes_watched < libraryEntry.anime.episode_count) || libraryEntry.anime.episode_count == null"><i class="icon ion-plus-round"></i></button>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>

<script id="libraryEntryModel.html" type="text/ng-template">
  <ion-modal-view>
    <h3>{{selected.libraryEntry.anime.title}}</h3>
  </ion-modal-view>
</script>
